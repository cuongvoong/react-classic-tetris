{"version":3,"sources":["actions/currentPieceActions.js","actions/types.js","actions/gameStateActions.js","constants.js","actions/nextPieceActions.js","actions/playfieldActions.js","actions/statisticsActions.js","components/Leaderboard.jsx","components/ATypeLevel.jsx","components/AType.jsx","actions/levelActions.js","components/level/Level.jsx","components/lines/Lines.jsx","components/statistics/T.jsx","components/statistics/O.jsx","components/statistics/I.jsx","components/statistics/L.jsx","components/statistics/Z.jsx","components/statistics/J.jsx","components/statistics/S.jsx","components/next/Next.jsx","components/scoreboard/TopScore.jsx","components/scoreboard/CurrentScore.jsx","components/scoreboard/Scoreboard.jsx","components/statistics/StatisticsRow.jsx","components/statistics/Statistics.jsx","reducers/scoreReducer.js","reducers/playfieldReducer.js","reducers/statisticsReducer.js","reducers/nextPieceReducer.js","reducers/currentPieceReducer.js","reducers/gameStateReducer.js","reducers/leaderboardReducer.js","reducers/lockReducer.js","reducers/index.js","reducers/levelReducer.js","reducers/linesReducer.js","reducers/musicReducer.js","store/index.js","components/controller/ControllerButton.jsx","components/controller/DPad.jsx","currentPieceHelper.js","containers/Controller.jsx","actions/controllerActions.js","config.js","playfieldHelper.js","containers/Playfield.jsx","containers/App.js","actions/lockActions.js","actions/lineActions.js","actions/scoreActions.js","serviceWorker.js","index.js"],"names":["setCurrentPiece","pieceType","dispatch","type","payload","gameOver","GAME_STATE","LevelSelection","Playing","Paused","GameOver","KEYBOARD","LEFT","UP","RIGHT","DOWN","A","B","PIECE","T","0","shape","top","bottom","90","180","270","spawn","x","y","color","J","Z","O","S","L","I","RANDOM_PIECE","1","2","3","4","5","6","newPiece","currentPiece","randomize","Math","floor","random","clearLines","fullLines","lockPiece","updatePieceStatistics","piece","Leaderboard","props","top3","leaderboard","map","player","index","react_default","a","createElement","key","name","score","level","className","ATypeLevel","_ref","onLevelClick","handleClick","e","shiftKey","onClick","AType","handleLevelClick","_this","setLevel","onGameStart","_this2","this","levels","Array","fill","_","i","components_ATypeLevel","src_components_Leaderboard","Component","connect","state","Level","toString","padStart","Lines","lines","Next","next","nextPiece","statistics_T","statistics_J","statistics_Z","statistics_O","statistics_S","statistics_L","statistics_I","style","height","TopScore","CurrentScore","Scoreboard","current","scoreboard_TopScore","scoreboard_CurrentScore","StatisticsRow","statistic","Statistics","statistics","statistics_StatisticsRow","initialState","hidden","rotation","lock","entryDelayFrames","rootReducer","combineReducers","arguments","length","undefined","action","Object","objectSpread","console","log","playfield","stateWithCurrentPiece","row","j","push","toConsumableArray","concat","filter","indexOf","music","defineProperty","clocwiseRotation","counterClocwiseRotation","gameState","middleware","thunk","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","apply","ControllerButton","onButtonClick","class","children","DPad","onUpButtonClick","onDownButtonClick","onLeftButtonClick","onRightButtonClick","controller_ControllerButton","calculateSpacesWanted","wanted","curX","curY","canMove","wantedSpaces","hasCollision","canRotate","degree","newRotation","afterRotation","Controller","handleUpButtonClick","up","handleDownButtonClick","down","handleLeftButtonClick","left","handleRightButtonClick","right","handleSelectButtonClick","select","handleStartButtonClick","start","onStartButton","handleBButtonClick","b","handleAButtonClick","handleKeyDown","keyCode","document","addEventListener","removeEventListener","controller_DPad","config","rows","columns","blockSize","calculateFramePerGridCell","calculateEntryDelay","Playfield","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","context","mainLoop","timestamp","clearedLines","clearBackground","drawGrid","drawPlayfieldWithAnimation","linesClearedArray","clearIndex","animationFrameCounter","onUpdateScore","entryDelay","entryDelayFramesCounter","onNextLoop","drawPlayfield","frameCounter","framesPerGridCell","canPieceMoveOneRow","dropOneRow","linesCleared","newPlayfield","slice","drawCurrentShape","myReq","requestAnimationFrame","cancelAnimationFrame","_this$props","_this$props2","end","every","value","fillStyle","fillRect","canvas","width","ctx","moveTo","lineTo","stroke","strokeStyle","strokeRect","newRow","_this$props$currentPi","React","createRef","setState","getContext","ref","PureComponent","App","handleNextLoop","generateNextPiece","handleGameStart","gameStart","handleUpdateScore","single","double","triple","tetris","prevProps","_this$props3","es","src_components_AType","Fragment","statistics_Statistics","lines_Lines","containers_Playfield","onMoveBlock","moveBlock","scoreboard_Scoreboard","next_Next","level_Level","src_containers_Controller","handleStartButton","setEntryDelay","updateLines","Boolean","location","hostname","match","ReactDOM","render","src_containers_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.9d6a09de.chunk.js","sourcesContent":["import { SET_CURRENT_PIECE, DROP_ONE_ROW } from \"./types\";\r\n\r\nexport const setCurrentPiece = pieceType => dispatch => {\r\n  dispatch({\r\n    type: SET_CURRENT_PIECE,\r\n    payload: pieceType\r\n  });\r\n};\r\n\r\nexport const dropOneRow = currentPiece => dispatch => {\r\n  dispatch({\r\n    type: DROP_ONE_ROW,\r\n    payload: currentPiece\r\n  });\r\n};\r\n","//Score actions\r\nexport const SINGLE = \"SINGLE\";\r\nexport const DOUBLE = \"DOUBLE\";\r\nexport const TRIPLE = \"TRIPLE\";\r\nexport const TETRIS = \"TETRIS\";\r\n\r\n//Playfield actions\r\nexport const LOCK_PIECE = \"LOCK_PIECE\";\r\nexport const CLEAR_LINES = \"CLEAR_LINES\";\r\n\r\n//Current Piece actions\r\nexport const SET_CURRENT_PIECE = \"SET_CURRENT_PIECE\";\r\nexport const MOVE_DOWN = \"MOVE_DOWN\";\r\nexport const MOVE_LEFT = \"MOVE_LEFT\";\r\nexport const MOVE_RIGHT = \"MOVE_RIGHT\";\r\nexport const ROTATE_CLOCKWISE = \"ROTATE_CLOCKWISE\";\r\nexport const ROTATE_COUNTERCLOCKWISE = \"ROTATE_COUNTERCLOCKWISE\";\r\nexport const DROP_ONE_ROW = \"DROP_ONE_ROW\";\r\n\r\n//Next Piece actions\r\nexport const GENERATE_NEXT_PIECE = \"GENERATE_NEXT_PIECE\";\r\nexport const SET_NEXT_PIECE = \"SET_NEXT_PIECE\";\r\nexport const MAKE_NEXT_PIECE_CURRENT = \"MAKE_NEXT_PIECE_CURRENT\";\r\nexport const UPDATE_CURRENT_PIECE_X = \"UPDATE_CURRENT_PIECE_X\";\r\nexport const UPDATE_CURRENT_PIECE_Y = \"UPDATE_CURRENT_PIECE_Y\";\r\n\r\n//Controller actions\r\nexport const SELECT_BUTTON = \"SELECT_BUTTON\";\r\nexport const START_BUTTON = \"START_BUTTON\";\r\nexport const B_BUTTON = \"B_BUTTON\";\r\nexport const A_BUTTON = \"A_BUTTON\";\r\nexport const UP = \"UP\";\r\nexport const DOWN = \"DOWN\";\r\nexport const LEFT = \"LEFT\";\r\nexport const RIGHT = \"RIGHT\";\r\n\r\n//Level actions\r\nexport const INCREMENT_LEVEL = \"INCREMENT_LEVEL\";\r\nexport const SET_LEVEL = \"SET_LEVEL\";\r\n\r\n//Leaderboard actions\r\nexport const UPDATE_LEADERBOARD = \"UPDATE_LEADERBOARD\";\r\n\r\n//Game State actions\r\nexport const GAME_START = \"GAME_START\";\r\nexport const GAME_OVER = \"GAME_OVER\";\r\n\r\n//Statistics actions\r\nexport const UPDATE_PIECE_STATISTICS = \"UPDATE_PIECE_STATISTICS\";\r\n\r\n//Line actions\r\nexport const UPDATE_LINES = \"UPDATE_LINES\";\r\n\r\n//Lock actions\r\nexport const SET_ENTRY_DELAY = \"SET_ENTRY_DELAY\";\r\n","import { GAME_START, GAME_OVER } from \"./types\";\r\n\r\nexport const gameStart = () => dispatch => {\r\n  dispatch({\r\n    type: GAME_START\r\n  });\r\n};\r\n\r\nexport const gameOver = () => dispatch => {\r\n  dispatch({\r\n    type: GAME_OVER\r\n  });\r\n};\r\n","export const GAME_STATE = {\r\n  LevelSelection: 0,\r\n  Playing: 1,\r\n  Paused: 2,\r\n  GameOver: 3\r\n};\r\n\r\nexport const KEYBOARD = {\r\n  LEFT: 37,\r\n  UP: 38,\r\n  RIGHT: 39,\r\n  DOWN: 40,\r\n  A: 65,\r\n  B: 66\r\n};\r\n\r\nexport const PIECE = {\r\n  T: {\r\n    0: {\r\n      shape: [[0, 0, 0], [\"T\", \"T\", \"T\"], [0, \"T\", 0]],\r\n      top: 1,\r\n      bottom: 2\r\n    },\r\n\r\n    90: {\r\n      shape: [[0, \"T\", 0], [\"T\", \"T\", 0], [0, \"T\", 0]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    180: {\r\n      shape: [[0, \"T\", 0], [\"T\", \"T\", \"T\"], [0, 0, 0]],\r\n      top: 0,\r\n      bottom: 1\r\n    },\r\n    270: {\r\n      shape: [[0, \"T\", 0], [0, \"T\", \"T\"], [0, \"T\", 0]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    spawn: {\r\n      x: -1,\r\n      y: 4\r\n    },\r\n    color: \"white\"\r\n  },\r\n  J: {\r\n    0: {\r\n      shape: [[0, 0, 0], [\"J\", \"J\", \"J\"], [0, 0, \"J\"]],\r\n      top: 1,\r\n      bottom: 2\r\n    },\r\n    90: {\r\n      shape: [[0, \"J\", 0], [0, \"J\", 0], [\"J\", \"J\", 0]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    180: {\r\n      shape: [[\"J\", 0, 0], [\"J\", \"J\", \"J\"], [0, 0, 0]],\r\n      top: 0,\r\n      bottom: 1\r\n    },\r\n    270: {\r\n      shape: [[0, \"J\", \"J\"], [0, \"J\", 0], [0, \"J\", 0]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    spawn: {\r\n      x: -1,\r\n      y: 4\r\n    },\r\n    color: \"blueviolet\"\r\n  },\r\n  Z: {\r\n    0: {\r\n      shape: [[0, 0, 0], [\"Z\", \"Z\", 0], [0, \"Z\", \"Z\"]],\r\n      top: 1,\r\n      bottom: 2\r\n    },\r\n    90: {\r\n      shape: [[0, 0, \"Z\"], [0, \"Z\", \"Z\"], [0, \"Z\", 0]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    180: {\r\n      shape: [[0, 0, 0], [\"Z\", \"Z\", 0], [0, \"Z\", \"Z\"]],\r\n      top: 1,\r\n      bottom: 2\r\n    },\r\n    270: {\r\n      shape: [[0, 0, \"Z\"], [0, \"Z\", \"Z\"], [0, \"Z\", 0]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    spawn: {\r\n      x: -1,\r\n      y: 4\r\n    },\r\n    color: \"red\"\r\n  },\r\n  O: {\r\n    0: {\r\n      shape: [[\"O\", \"O\"], [\"O\", \"O\"]],\r\n      top: 0,\r\n      bottom: 1\r\n    },\r\n    90: {\r\n      shape: [[\"O\", \"O\"], [\"O\", \"O\"]],\r\n      top: 0,\r\n      bottom: 1\r\n    },\r\n    180: {\r\n      shape: [[\"O\", \"O\"], [\"O\", \"O\"]],\r\n      top: 0,\r\n      bottom: 1\r\n    },\r\n    270: {\r\n      shape: [[\"O\", \"O\"], [\"O\", \"O\"]],\r\n      top: 0,\r\n      bottom: 1\r\n    },\r\n    spawn: {\r\n      x: 0,\r\n      y: 4\r\n    },\r\n    color: \"white\"\r\n  },\r\n  S: {\r\n    0: {\r\n      shape: [[0, 0, 0], [0, \"S\", \"S\"], [\"S\", \"S\", 0]],\r\n      top: 1,\r\n      bottom: 2\r\n    },\r\n    90: {\r\n      shape: [[0, \"S\", 0], [0, \"S\", \"S\"], [0, 0, \"S\"]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    180: {\r\n      shape: [[0, 0, 0], [0, \"S\", \"S\"], [\"S\", \"S\", 0]],\r\n      top: 1,\r\n      bottom: 2\r\n    },\r\n    270: {\r\n      shape: [[0, \"S\", 0], [0, \"S\", \"S\"], [0, 0, \"S\"]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    spawn: {\r\n      x: -1,\r\n      y: 4\r\n    },\r\n    color: \"blueviolet\"\r\n  },\r\n  L: {\r\n    0: {\r\n      shape: [[0, 0, 0], [\"L\", \"L\", \"L\"], [\"L\", 0, 0]],\r\n      top: 1,\r\n      bottom: 2\r\n    },\r\n    90: {\r\n      shape: [[\"L\", \"L\", 0], [0, \"L\", 0], [0, \"L\", 0]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    180: {\r\n      shape: [[0, 0, \"L\"], [\"L\", \"L\", \"L\"], [0, 0, 0]],\r\n      top: 0,\r\n      bottom: 1\r\n    },\r\n    270: {\r\n      shape: [[0, \"L\", 0], [0, \"L\", 0], [0, \"L\", \"L\"]],\r\n      top: 0,\r\n      bottom: 2\r\n    },\r\n    spawn: {\r\n      x: -1,\r\n      y: 4\r\n    },\r\n    color: \"red\"\r\n  },\r\n  I: {\r\n    0: {\r\n      shape: [[0, 0, 0, 0], [0, 0, 0, 0], [\"I\", \"I\", \"I\", \"I\"], [0, 0, 0, 0]],\r\n      top: 2,\r\n      bottom: 2\r\n    },\r\n    90: {\r\n      shape: [[0, 0, \"I\", 0], [0, 0, \"I\", 0], [0, 0, \"I\", 0], [0, 0, \"I\", 0]],\r\n      top: 0,\r\n      bottom: 3\r\n    },\r\n    180: {\r\n      shape: [[0, 0, 0, 0], [0, 0, 0, 0], [\"I\", \"I\", \"I\", \"I\"], [0, 0, 0, 0]],\r\n      top: 2,\r\n      bottom: 2\r\n    },\r\n    270: {\r\n      shape: [[0, 0, \"I\", 0], [0, 0, \"I\", 0], [0, 0, \"I\", 0], [0, 0, \"I\", 0]],\r\n      top: 0,\r\n      bottom: 3\r\n    },\r\n    spawn: {\r\n      x: -2,\r\n      y: 3\r\n    },\r\n    color: \"white\"\r\n  }\r\n};\r\n\r\nexport const RANDOM_PIECE = {\r\n  0: \"T\",\r\n  1: \"J\",\r\n  2: \"Z\",\r\n  3: \"O\",\r\n  4: \"S\",\r\n  5: \"L\",\r\n  6: \"I\"\r\n};\r\n","import { GENERATE_NEXT_PIECE } from \"./types\";\r\nimport { RANDOM_PIECE } from \"../constants\";\r\n\r\nexport const generateNextPiece = currentPiece => dispatch => {\r\n  const nextPiece = newPiece(currentPiece);\r\n\r\n  dispatch({\r\n    type: GENERATE_NEXT_PIECE,\r\n    payload: nextPiece\r\n  });\r\n};\r\n\r\nconst newPiece = currentPiece => {\r\n  const randomize = Math.floor(Math.random() * 8);\r\n  if (randomize !== 7) {\r\n    if (currentPiece.type === null) {\r\n      return RANDOM_PIECE[randomize];\r\n    } else {\r\n      if (RANDOM_PIECE[randomize] !== currentPiece.type) {\r\n        return RANDOM_PIECE[randomize];\r\n      } else {\r\n        return RANDOM_PIECE[Math.floor(Math.random() * 7)];\r\n      }\r\n    }\r\n  } else {\r\n    return RANDOM_PIECE[Math.floor(Math.random() * 7)];\r\n  }\r\n};\r\n","import { CLEAR_LINES, LOCK_PIECE } from \"../actions/types\";\r\n\r\nexport const clearLines = fullLines => dispatch => {\r\n  dispatch({\r\n    type: CLEAR_LINES,\r\n    payload: fullLines\r\n  });\r\n};\r\n\r\nexport const lockPiece = currentPiece => dispatch => {\r\n  dispatch({\r\n    type: LOCK_PIECE,\r\n    payload: currentPiece\r\n  });\r\n};\r\n","import { UPDATE_PIECE_STATISTICS } from \"./types\";\r\n\r\nexport const updatePieceStatistics = piece => dispatch => {\r\n  dispatch({\r\n    type: UPDATE_PIECE_STATISTICS,\r\n    payload: piece\r\n  });\r\n};\r\n","import React from \"react\";\r\nimport \"./Leaderboard.scss\";\r\n\r\nconst Leaderboard = props => {\r\n  const top3 = props.leaderboard.map((player, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1}</td>\r\n        <td>{player.name}</td>\r\n        <td>{player.score}</td>\r\n        <td>{player.level}</td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <section className=\"leaderboard\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th />\r\n            <th className=\"th-name\">NAME</th>\r\n            <th className=\"th-score\">SCORE</th>\r\n            <th className=\"th-level\">LV</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{top3}</tbody>\r\n      </table>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Leaderboard;\r\n","import React from \"react\";\r\n\r\nconst ATypeLevel = ({ level, onLevelClick }) => {\r\n  const handleClick = e => {\r\n    onLevelClick(e.shiftKey ? level + 10 : level);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      onClick={(e, level) => handleClick(e, level)}\r\n      className=\"level-selection-numbers-item\"\r\n    >\r\n      {level}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ATypeLevel;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Leaderboard from \"./Leaderboard\";\r\nimport \"./AType.scss\";\r\nimport ATypeLevel from \"./ATypeLevel\";\r\nimport { setLevel } from \"../actions/levelActions\";\r\n\r\nclass AType extends Component {\r\n  handleLevelClick = level => {\r\n    this.props.setLevel(level);\r\n    this.props.onGameStart();\r\n  };\r\n\r\n  render() {\r\n    const { leaderboard } = this.props;\r\n\r\n    const levels = Array(10)\r\n      .fill()\r\n      .map((_, i) => {\r\n        return (\r\n          <ATypeLevel\r\n            key={i}\r\n            level={i}\r\n            onLevelClick={level => this.handleLevelClick(level)}\r\n          />\r\n        );\r\n      });\r\n\r\n    return (\r\n      <div className=\"a-type\">\r\n        <section className=\"level-selection\">\r\n          <div className=\"level-selection-header\">\r\n            <h2>LEVEL</h2>\r\n          </div>\r\n          <div className=\"level-selection-numbers\">{levels}</div>\r\n        </section>\r\n        <Leaderboard leaderboard={leaderboard} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  leaderboard: state.leaderboard\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { setLevel }\r\n)(AType);\r\n","import { SET_LEVEL, INCREMENT_LEVEL } from \"./types\";\r\n\r\nexport const setLevel = level => dispatch => {\r\n  dispatch({\r\n    type: SET_LEVEL,\r\n    payload: level\r\n  });\r\n};\r\n\r\nexport const incrementLevel = () => dispatch => {\r\n  dispatch({\r\n    type: INCREMENT_LEVEL\r\n  });\r\n};\r\n","import React from \"react\";\r\n\r\nconst Level = props => {\r\n  return (\r\n    <section className=\"level\">\r\n      <div className=\"section-header\">LEVEL</div>\r\n      <div className=\"section-text\">\r\n        {props.level.toString().padStart(2, 0)}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Level;\r\n","import React from \"react\";\r\n\r\nconst Lines = ({ lines }) => {\r\n  return (\r\n    <section className=\"lines\">\r\n      <span className=\"section-text\">\r\n        LINES-\r\n        {lines.toString().padStart(3, \"0\")}\r\n      </span>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Lines;\r\n","import React from \"react\";\r\n\r\nconst T = () => {\r\n  return (\r\n    <div className=\"t\">\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default T;\r\n","import React from \"react\";\r\n\r\nconst O = () => {\r\n  return (\r\n    <div className=\"o\">\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default O;\r\n","import React from \"react\";\r\n\r\nconst I = () => {\r\n  return (\r\n    <div className=\"i\">\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default I;\r\n","import React from \"react\";\r\n\r\nconst L = () => {\r\n  return (\r\n    <div className=\"l\">\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"\" />\r\n        <div className=\"\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default L;\r\n","import React from \"react\";\r\n\r\nconst Z = () => {\r\n  return (\r\n    <div className=\"z\">\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"\" />\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Z;\r\n","import React from \"react\";\r\n\r\nconst J = () => {\r\n  return (\r\n    <div className=\"j\">\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n      </div>\r\n      <div className=\"row\">\r\n        <div />\r\n        <div />\r\n        <div className=\"fill\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default J;\r\n","import React from \"react\";\r\n\r\nconst S = () => {\r\n  return (\r\n    <div className=\"s\">\r\n      <div className=\"row\">\r\n        <div className=\"\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"fill\" />\r\n        <div className=\"fill\" />\r\n        <div className=\"\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default S;\r\n","import React from \"react\";\r\nimport T from \"../statistics/T\";\r\nimport O from \"../statistics/O\";\r\nimport I from \"../statistics/I\";\r\nimport L from \"../statistics/L\";\r\nimport Z from \"../statistics/Z\";\r\nimport J from \"../statistics/J\";\r\nimport S from \"../statistics/S\";\r\n\r\nconst Next = ({ nextPiece }) => {\r\n  let next;\r\n\r\n  switch (nextPiece.type) {\r\n    case \"T\":\r\n      next = <T />;\r\n      break;\r\n    case \"J\":\r\n      next = <J />;\r\n      break;\r\n    case \"Z\":\r\n      next = <Z />;\r\n      break;\r\n    case \"O\":\r\n      next = <O />;\r\n      break;\r\n    case \"S\":\r\n      next = <S />;\r\n      break;\r\n    case \"L\":\r\n      next = <L />;\r\n      break;\r\n    case \"I\":\r\n      next = <I />;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return (\r\n    <section className=\"next\">\r\n      <div className=\"section-header\">NEXT</div>\r\n      <div style={{ height: 50 }}>{next}</div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Next;\r\n","import React from \"react\";\r\n\r\nconst TopScore = props => {\r\n  return (\r\n    <section className=\"top-score\">\r\n      <div className=\"section-header\">TOP</div>\r\n      <span className=\"section-text\">{props.score}</span>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default TopScore;\r\n","import React from \"react\";\r\n\r\nconst CurrentScore = props => {\r\n  return (\r\n    <section className=\"current-score\">\r\n      <div className=\"section-header\">SCORE</div>\r\n      <span className=\"section-text\">{props.score}</span>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default CurrentScore;\r\n","import React from \"react\";\r\nimport TopScore from \"./TopScore\";\r\nimport CurrentScore from \"./CurrentScore\";\r\n\r\nconst Scoreboard = ({ score }) => {\r\n  const { top, current } = score;\r\n\r\n  return (\r\n    <section className=\"scoreboard\">\r\n      <TopScore score={top} />\r\n      <CurrentScore score={current} />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Scoreboard;\r\n","import React from \"react\";\r\n\r\nconst StatisticsRow = props => {\r\n  return (\r\n    <tr className=\"statistics-row\">\r\n      <td>\r\n        <div className=\"piece\">{props.piece}</div>\r\n      </td>\r\n      <td>\r\n        <span className=\"counter\">\r\n          {props.statistic.toString().padStart(3, \"0\")}\r\n        </span>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default StatisticsRow;\r\n","import React from \"react\";\r\nimport StatisticsRow from \"./StatisticsRow\";\r\nimport T from \"./T\";\r\nimport J from \"./J\";\r\nimport Z from \"./Z\";\r\nimport O from \"./O\";\r\nimport S from \"./S\";\r\nimport L from \"./L\";\r\nimport I from \"./I\";\r\n\r\nconst Statistics = ({ statistics }) => {\r\n  return (\r\n    <section className=\"statistics\">\r\n      <div className=\"section-header\">STATISTICS</div>\r\n      <table>\r\n        <tbody>\r\n          <StatisticsRow piece={<T />} statistic={statistics.T} />\r\n          <StatisticsRow piece={<J />} statistic={statistics.J} />\r\n          <StatisticsRow piece={<Z />} statistic={statistics.Z} />\r\n          <StatisticsRow piece={<O />} statistic={statistics.O} />\r\n          <StatisticsRow piece={<S />} statistic={statistics.S} />\r\n          <StatisticsRow piece={<L />} statistic={statistics.L} />\r\n          <StatisticsRow piece={<I />} statistic={statistics.I} />\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Statistics;\r\n","import { SINGLE, DOUBLE, TRIPLE, TETRIS } from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  top: 10000,\r\n  current: 0\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SINGLE:\r\n      return {\r\n        ...state,\r\n        current: 40 * (action.payload + 1) + state.current\r\n      };\r\n    case DOUBLE:\r\n      return {\r\n        ...state,\r\n        current: 100 * (action.payload + 1) + state.current\r\n      };\r\n    case TRIPLE:\r\n      return {\r\n        ...state,\r\n        current: 300 * (action.payload + 1) + state.current\r\n      };\r\n    case TETRIS:\r\n      console.log(action.payload);\r\n      return {\r\n        ...state,\r\n        current: 1200 * (action.payload + 1) + state.current\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { LOCK_PIECE, CLEAR_LINES, ANIMATE_CLEAR_LINES } from \"../actions/types\";\r\n\r\nconst initialState = Array(20).fill(Array(10).fill(0));\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOCK_PIECE:\r\n      const stateWithCurrentPiece = [];\r\n\r\n      //For every row in the grid\r\n      for (let i = 0; i < state.length; i++) {\r\n        const row = [];\r\n        //For every element in the grid row\r\n        for (let j = 0; j < state[i].length; j++) {\r\n          //If current row is between current piece's X position\r\n          if (\r\n            i >= action.payload.x &&\r\n            i <= action.payload.x + action.payload.shape.length - 1\r\n          ) {\r\n            // If current element between current piece's Y position\r\n            if (\r\n              j >= action.payload.y &&\r\n              j <=\r\n                action.payload.shape[i - action.payload.x].length -\r\n                  1 +\r\n                  action.payload.y\r\n            ) {\r\n              row.push(\r\n                action.payload.shape[i - action.payload.x][\r\n                  j - action.payload.y\r\n                ] || state[i][j]\r\n              );\r\n            } else {\r\n              row.push(state[i][j]);\r\n            }\r\n          } else {\r\n            row.push(state[i][j]);\r\n          }\r\n        }\r\n        stateWithCurrentPiece.push(row);\r\n      }\r\n\r\n      return stateWithCurrentPiece;\r\n\r\n    case CLEAR_LINES:\r\n      const newPlayfield = [\r\n        ...Array(action.payload.length).fill(Array(10).fill(0)),\r\n        ...state.filter((_, index) => {\r\n          return action.payload.indexOf(index) === -1;\r\n        })\r\n      ];\r\n      return newPlayfield;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { UPDATE_PIECE_STATISTICS } from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  T: 0,\r\n  J: 0,\r\n  Z: 0,\r\n  O: 0,\r\n  S: 0,\r\n  L: 0,\r\n  I: 0\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case UPDATE_PIECE_STATISTICS:\r\n      return {\r\n        ...state,\r\n        [action.payload]: state[action.payload] + 1\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { GENERATE_NEXT_PIECE, SELECT_BUTTON } from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  type: null,\r\n  hidden: false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case GENERATE_NEXT_PIECE:\r\n      return {\r\n        ...state,\r\n        type: action.payload\r\n      };\r\n\r\n    case SELECT_BUTTON:\r\n      return {\r\n        ...state,\r\n        hidden: !state.hidden\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SET_CURRENT_PIECE,\r\n  MOVE_LEFT,\r\n  MOVE_RIGHT,\r\n  MOVE_DOWN,\r\n  DROP_ONE_ROW,\r\n  ROTATE_CLOCKWISE,\r\n  ROTATE_COUNTERCLOCKWISE\r\n} from \"../actions/types\";\r\nimport { PIECE } from \"../constants\";\r\n\r\nconst initialState = {\r\n  type: null,\r\n  x: 0,\r\n  y: 0,\r\n  top: 0,\r\n  bottom: 0,\r\n  shape: null,\r\n  rotation: 0\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_CURRENT_PIECE:\r\n      return {\r\n        ...state,\r\n        type: action.payload,\r\n        x: PIECE[action.payload].spawn.x,\r\n        y: PIECE[action.payload].spawn.y,\r\n        shape: PIECE[action.payload][0].shape,\r\n        top: PIECE[action.payload][0].top,\r\n        bottom: PIECE[action.payload][0].bottom,\r\n        rotation: 0\r\n      };\r\n    case MOVE_LEFT:\r\n      return {\r\n        ...state,\r\n        y: state.y - 1\r\n      };\r\n\r\n    case MOVE_RIGHT:\r\n      return {\r\n        ...state,\r\n        y: state.y + 1\r\n      };\r\n\r\n    case MOVE_DOWN:\r\n      return {\r\n        ...state,\r\n        x: state.x + 1\r\n      };\r\n\r\n    case DROP_ONE_ROW:\r\n      return {\r\n        ...state,\r\n        x: state.x + 1\r\n      };\r\n\r\n    case ROTATE_CLOCKWISE:\r\n      const clocwiseRotation =\r\n        state.rotation + 90 >= 360 ? 0 : state.rotation + 90;\r\n\r\n      return {\r\n        ...state,\r\n        rotation: clocwiseRotation,\r\n        shape: PIECE[action.payload.type][clocwiseRotation].shape,\r\n        top: PIECE[action.payload.type][clocwiseRotation].top,\r\n        bottom: PIECE[action.payload.type][clocwiseRotation].bottom\r\n      };\r\n\r\n    case ROTATE_COUNTERCLOCKWISE:\r\n      const counterClocwiseRotation =\r\n        state.rotation === 0 ? 270 : state.rotation - 90;\r\n\r\n      return {\r\n        ...state,\r\n        rotation: counterClocwiseRotation,\r\n        shape: PIECE[action.payload.type][counterClocwiseRotation].shape,\r\n        top: PIECE[action.payload.type][counterClocwiseRotation].top,\r\n        bottom: PIECE[action.payload.type][counterClocwiseRotation].bottom\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { START_BUTTON, GAME_START, GAME_OVER } from \"../actions/types\";\r\nimport { GAME_STATE } from \"../constants\";\r\n\r\nconst initialState = GAME_STATE.LevelSelection;\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case START_BUTTON:\r\n      if (state === GAME_STATE.Playing) {\r\n        return GAME_STATE.Paused;\r\n      }\r\n      if (state === GAME_STATE.Paused) {\r\n        return GAME_STATE.Playing;\r\n      }\r\n      return state;\r\n    case GAME_START:\r\n      return GAME_STATE.Playing;\r\n\r\n    case GAME_OVER:\r\n      return GAME_STATE.GameOver;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { UPDATE_LEADERBOARD } from \"../actions/types\";\r\n\r\nconst initialState = [\r\n  {\r\n    name: \"HOWARD\",\r\n    score: 10000,\r\n    level: 9\r\n  },\r\n  {\r\n    name: \"OTASON\",\r\n    score: 7500,\r\n    level: 5\r\n  },\r\n  {\r\n    name: \"LANCE\",\r\n    score: 5000,\r\n    level: 0\r\n  }\r\n];\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case UPDATE_LEADERBOARD:\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { SET_ENTRY_DELAY } from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  lock: false,\r\n  entryDelayFrames: 0\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_ENTRY_DELAY:\r\n      return {\r\n        ...state,\r\n        lock: true,\r\n        entryDelayFrames: action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport score from \"./scoreReducer\";\r\nimport playfield from \"./playfieldReducer\";\r\nimport level from \"./levelReducer\";\r\nimport lines from \"./linesReducer\";\r\nimport music from \"./musicReducer\";\r\nimport statistics from \"./statisticsReducer\";\r\nimport nextPiece from \"./nextPieceReducer\";\r\nimport currentPiece from \"./currentPieceReducer\";\r\nimport gameState from \"./gameStateReducer\";\r\nimport leaderboard from \"./leaderboardReducer\";\r\nimport lock from \"./lockReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  score,\r\n  playfield,\r\n  level,\r\n  lines,\r\n  music,\r\n  statistics,\r\n  currentPiece,\r\n  nextPiece,\r\n  gameState,\r\n  leaderboard,\r\n  lock\r\n});\r\n\r\nexport default rootReducer;\r\n","import { SET_LEVEL, INCREMENT_LEVEL } from \"../actions/types\";\r\n\r\nconst initialState = null;\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_LEVEL:\r\n      return action.payload;\r\n    case INCREMENT_LEVEL:\r\n      return state + 1;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { UPDATE_LINES } from \"../actions/types\";\r\n\r\nconst initialState = 0;\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case UPDATE_LINES:\r\n      return state + action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","const initialState = true;\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport rootReducer from \"../reducers\";\r\nimport thunk from \"redux-thunk\";\r\n// import { createLogger } from \"redux-logger\";\r\n\r\nconst middleware = [thunk];\r\n\r\n// if (process.env.NODE_ENV !== \"production\") {\r\n//   middleware.push(createLogger());\r\n// }\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\n\r\nconst ControllerButton = props => {\r\n  const handleClick = () => {\r\n    props.onButtonClick();\r\n  };\r\n\r\n  return (\r\n    <div onClick={handleClick} className={props.class}>\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ControllerButton;\r\n","import React from \"react\";\r\nimport ControllerButton from \"./ControllerButton\";\r\n\r\nconst DPad = props => {\r\n  const {\r\n    onUpButtonClick,\r\n    onDownButtonClick,\r\n    onLeftButtonClick,\r\n    onRightButtonClick\r\n  } = props;\r\n\r\n  return (\r\n    <section className=\"d-pad\">\r\n      <div className=\"top-row\">\r\n        <div />\r\n        <ControllerButton onButtonClick={onUpButtonClick} class=\"up-button\" />\r\n        <div />\r\n      </div>\r\n      <div className=\"middle-row\">\r\n        <ControllerButton\r\n          onButtonClick={onLeftButtonClick}\r\n          class=\"left-button\"\r\n        />\r\n        <div />\r\n        <ControllerButton\r\n          onButtonClick={onRightButtonClick}\r\n          class=\"right-button\"\r\n        />\r\n      </div>\r\n      <div className=\"bottom-row\">\r\n        <div />\r\n        <ControllerButton\r\n          onButtonClick={onDownButtonClick}\r\n          class=\"down-button\"\r\n        />\r\n        <div />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default DPad;\r\n","import { PIECE } from \"./constants\";\r\n\r\nconst calculateSpacesWanted = (currentPiece, x, y) => {\r\n  const wanted = [];\r\n\r\n  const { x: curX, y: curY, shape } = currentPiece;\r\n\r\n  for (let i = 0; i < shape.length; i++) {\r\n    for (let j = 0; j < shape[i].length; j++) {\r\n      if (shape[i][j] !== 0) {\r\n        wanted.push([curX + x + i, curY + y + j]);\r\n      }\r\n    }\r\n  }\r\n\r\n  return wanted;\r\n};\r\n\r\nexport const canMove = (playfield, currentPiece, x, y) => {\r\n  const wantedSpaces = calculateSpacesWanted(currentPiece, x, y);\r\n\r\n  if (hasCollision(playfield, wantedSpaces)) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport const canRotate = (playfield, currentPiece, degree) => {\r\n  const { type, rotation, x, y } = currentPiece;\r\n\r\n  let newRotation = rotation + degree;\r\n  if (newRotation === -90) {\r\n    newRotation = 270;\r\n  }\r\n\r\n  if (newRotation === 360) {\r\n    newRotation = 0;\r\n  }\r\n\r\n  const afterRotation = {\r\n    shape: PIECE[type][newRotation].shape,\r\n    x,\r\n    y\r\n  };\r\n\r\n  const wantedSpaces = calculateSpacesWanted(afterRotation, 0, 0);\r\n\r\n  if (hasCollision(playfield, wantedSpaces)) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst hasCollision = (playfield, wantedSpaces) => {\r\n  for (let i = 0; i < wantedSpaces.length; i++) {\r\n    if (wantedSpaces[i][0] > 19) {\r\n      return true;\r\n    }\r\n\r\n    if (wantedSpaces[i][1] < 0 || wantedSpaces[i][1] > 9) {\r\n      return true;\r\n    }\r\n\r\n    if (wantedSpaces[i][0] >= 0) {\r\n      if (playfield[wantedSpaces[i][0]][wantedSpaces[i][1]] !== 0) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport \"./Controller.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport DPad from \"../components/controller/DPad\";\r\nimport ControllerButton from \"../components/controller/ControllerButton\";\r\nimport {\r\n  up,\r\n  down,\r\n  left,\r\n  right,\r\n  b,\r\n  a,\r\n  select,\r\n  start\r\n} from \"../actions/controllerActions\";\r\nimport { KEYBOARD } from \"../constants\";\r\n\r\nclass Controller extends Component {\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleUpButtonClick = () => {\r\n    this.props.up();\r\n  };\r\n\r\n  handleDownButtonClick = () => {\r\n    this.props.down(this.props.playfield, this.props.currentPiece);\r\n  };\r\n\r\n  handleLeftButtonClick = () => {\r\n    this.props.left(this.props.playfield, this.props.currentPiece);\r\n  };\r\n\r\n  handleRightButtonClick = () => {\r\n    this.props.right(this.props.playfield, this.props.currentPiece);\r\n  };\r\n\r\n  handleSelectButtonClick = () => {\r\n    this.props.select();\r\n  };\r\n\r\n  handleStartButtonClick = () => {\r\n    this.props.start();\r\n    this.props.onStartButton();\r\n  };\r\n\r\n  handleBButtonClick = () => {\r\n    this.props.b(this.props.playfield, this.props.currentPiece);\r\n  };\r\n\r\n  handleAButtonClick = () => {\r\n    this.props.a(this.props.playfield, this.props.currentPiece);\r\n  };\r\n\r\n  handleKeyDown = e => {\r\n    switch (e.keyCode) {\r\n      case KEYBOARD.UP:\r\n        this.handleUpButtonClick();\r\n        break;\r\n      case KEYBOARD.DOWN:\r\n        this.handleDownButtonClick();\r\n        break;\r\n      case KEYBOARD.LEFT:\r\n        this.handleLeftButtonClick();\r\n        break;\r\n      case KEYBOARD.RIGHT:\r\n        this.handleRightButtonClick();\r\n        break;\r\n      case KEYBOARD.A:\r\n        this.handleAButtonClick();\r\n        break;\r\n      case KEYBOARD.B:\r\n        this.handleBButtonClick();\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"controller\">\r\n        <DPad\r\n          onUpButtonClick={() => this.handleUpButtonClick()}\r\n          onDownButtonClick={() => this.handleDownButtonClick()}\r\n          onLeftButtonClick={() => this.handleLeftButtonClick()}\r\n          onRightButtonClick={() => this.handleRightButtonClick()}\r\n        />\r\n        <div className=\"select-start\">\r\n          <ControllerButton\r\n            onButtonClick={() => this.handleSelectButtonClick()}\r\n            class=\"select-button\"\r\n          />\r\n          <ControllerButton\r\n            onButtonClick={() => this.handleStartButtonClick()}\r\n            class=\"start-button\"\r\n          />\r\n        </div>\r\n        <div className=\"b-a\">\r\n          <ControllerButton\r\n            onButtonClick={() => this.handleBButtonClick()}\r\n            class=\"b-button\"\r\n          />\r\n          <ControllerButton\r\n            onButtonClick={() => this.handleAButtonClick()}\r\n            class=\"a-button\"\r\n          />\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  playfield: state.playfield,\r\n  currentPiece: state.currentPiece\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {\r\n    up,\r\n    down,\r\n    left,\r\n    right,\r\n    b,\r\n    a,\r\n    select,\r\n    start\r\n  }\r\n)(Controller);\r\n","import {\r\n  SELECT_BUTTON,\r\n  START_BUTTON,\r\n  MOVE_DOWN,\r\n  MOVE_LEFT,\r\n  MOVE_RIGHT,\r\n  LOCK_PIECE,\r\n  ROTATE_CLOCKWISE,\r\n  ROTATE_COUNTERCLOCKWISE\r\n} from \"./types\";\r\nimport { canMove, canRotate } from \"../currentPieceHelper\";\r\n\r\nexport const selectButton = () => dispatch => {\r\n  dispatch({\r\n    type: SELECT_BUTTON\r\n  });\r\n};\r\n\r\nexport const startButton = () => dispatch => {\r\n  dispatch({\r\n    type: START_BUTTON\r\n  });\r\n};\r\n\r\nexport const b = (playfield, currentPiece) => dispatch => {\r\n  if (canRotate(playfield, currentPiece, -90))\r\n    dispatch({\r\n      type: ROTATE_COUNTERCLOCKWISE,\r\n      payload: currentPiece\r\n    });\r\n};\r\n\r\nexport const a = (playfield, currentPiece) => dispatch => {\r\n  if (canRotate(playfield, currentPiece, 90)) {\r\n    dispatch({\r\n      type: ROTATE_CLOCKWISE,\r\n      payload: currentPiece\r\n    });\r\n  }\r\n};\r\n\r\nexport const up = () => dispatch => {\r\n  // dispatch({\r\n  //   type: UP\r\n  // });\r\n};\r\n\r\nexport const down = (playfield, currentPiece) => dispatch => {\r\n  if (canMove(playfield, currentPiece, 1, 0)) {\r\n    dispatch({\r\n      type: MOVE_DOWN\r\n    });\r\n  } else {\r\n    dispatch({\r\n      type: LOCK_PIECE,\r\n      payload: currentPiece\r\n    });\r\n  }\r\n};\r\n\r\nexport const left = (playfield, currentPiece) => dispatch => {\r\n  if (canMove(playfield, currentPiece, 0, -1)) {\r\n    dispatch({\r\n      type: MOVE_LEFT\r\n    });\r\n  }\r\n};\r\n\r\nexport const right = (playfield, currentPiece) => dispatch => {\r\n  if (canMove(playfield, currentPiece, 0, 1)) {\r\n    dispatch({\r\n      type: MOVE_RIGHT\r\n    });\r\n  }\r\n};\r\n\r\nexport const select = () => dispatch => {\r\n  dispatch({\r\n    type: SELECT_BUTTON\r\n  });\r\n};\r\nexport const start = () => dispatch => {\r\n  dispatch({\r\n    type: START_BUTTON\r\n  });\r\n};\r\n","export default {\r\n  playfield: {\r\n    rows: 20,\r\n    columns: 10,\r\n    blockSize: 30\r\n  }\r\n};\r\n","export const calculateFramePerGridCell = level => {\r\n  if (level === 0) return 48;\r\n  else if (level === 1) return 43;\r\n  else if (level === 2) return 38;\r\n  else if (level === 3) return 33;\r\n  else if (level === 4) return 28;\r\n  else if (level === 5) return 23;\r\n  else if (level === 6) return 18;\r\n  else if (level === 7) return 13;\r\n  else if (level === 8) return 8;\r\n  else if (level === 9) return 6;\r\n  else if (level >= 10 && level <= 12) return 5;\r\n  else if (level >= 13 && level <= 15) return 4;\r\n  else if (level >= 16 && level <= 18) return 3;\r\n  else if (level >= 19 && level <= 28) return 2;\r\n  else return 1;\r\n};\r\n\r\nexport const calculateEntryDelay = currentPiece => {\r\n  if (\r\n    currentPiece.x + currentPiece.bottom >= 18 &&\r\n    currentPiece.x + currentPiece.bottom <= 19\r\n  ) {\r\n    return 10;\r\n  } else if (\r\n    currentPiece.x + currentPiece.bottom >= 14 &&\r\n    currentPiece.x + currentPiece.bottom <= 17\r\n  ) {\r\n    return 12;\r\n  } else if (\r\n    currentPiece.x + currentPiece.bottom >= 10 &&\r\n    currentPiece.x + currentPiece.bottom <= 13\r\n  ) {\r\n    return 14;\r\n  } else if (\r\n    currentPiece.x + currentPiece.bottom >= 6 &&\r\n    currentPiece.x + currentPiece.bottom <= 9\r\n  ) {\r\n    return 16;\r\n  } else if (\r\n    currentPiece.x + currentPiece.bottom >= 2 &&\r\n    currentPiece.x + currentPiece.bottom <= 5\r\n  ) {\r\n    return 18;\r\n  } else {\r\n    return 20;\r\n  }\r\n};\r\n\r\nexport const calculateLinesCleared = () => {\r\n  const fullLines = [];\r\n\r\n  this.props.playfield.forEach((row, index) => {\r\n    if (\r\n      row.every(value => {\r\n        return value !== 0;\r\n      })\r\n    ) {\r\n      fullLines.push(index);\r\n    }\r\n  });\r\n\r\n  return fullLines;\r\n};\r\n","import React, { PureComponent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport config from \"../config\";\r\nimport { dropOneRow, setCurrentPiece } from \"../actions/currentPieceActions\";\r\nimport { lockPiece, clearLines } from \"../actions/playfieldActions\";\r\nimport { canMove } from \"../currentPieceHelper\";\r\nimport { updatePieceStatistics } from \"../actions/statisticsActions\";\r\nimport { gameOver } from \"../actions/gameStateActions\";\r\nimport { GAME_STATE, PIECE } from \"../constants\";\r\nimport {\r\n  calculateFramePerGridCell,\r\n  calculateEntryDelay\r\n} from \"../playfieldHelper\";\r\n\r\nclass Playfield extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.canvas = React.createRef();\r\n    this.frameCounter = 0;\r\n    this.framesPerGridCell = calculateFramePerGridCell(this.props.level);\r\n    this.entryDelay = false;\r\n    this.entryDelayFramesCounter = 0;\r\n\r\n    this.linesClearedArray = null;\r\n    this.clearedLines = false;\r\n    this.clearIndex = 0;\r\n    this.animationFrameCounter = 0;\r\n\r\n    this.newPlayfield = [];\r\n\r\n    this.myReq = null;\r\n  }\r\n  state = {\r\n    context: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      context: this.canvas.current.getContext(\"2d\")\r\n    });\r\n    this.myReq = requestAnimationFrame(timestamp => this.mainLoop(timestamp));\r\n  }\r\n\r\n  mainLoop = timestamp => {\r\n    const { currentPiece } = this.props;\r\n\r\n    //Game over, stop animation\r\n    if (this.props.gameState === GAME_STATE.GameOver) {\r\n      cancelAnimationFrame(this.myReq);\r\n      return;\r\n    }\r\n\r\n    if (this.clearedLines) {\r\n      this.clearBackground();\r\n      this.drawGrid();\r\n      this.drawPlayfieldWithAnimation(this.linesClearedArray, this.clearIndex);\r\n\r\n      if (this.animationFrameCounter === 4) {\r\n        this.clearIndex++;\r\n        if (this.clearIndex === 5) {\r\n          this.clearIndex = 0;\r\n          this.clearedLines = false;\r\n          this.props.clearLines(this.linesClearedArray);\r\n          this.props.onUpdateScore(this.linesClearedArray.length);\r\n        }\r\n        this.animationFrameCounter = 0;\r\n      }\r\n\r\n      this.animationFrameCounter++;\r\n    }\r\n\r\n    //Locked piece to playfield, start entry delay\r\n    else if (this.entryDelay) {\r\n      if (this.entryDelayFramesCounter === this.entryDelayFrames) {\r\n        this.props.onNextLoop();\r\n        this.entryDelayFramesCounter = 0;\r\n        this.entryDelay = false;\r\n      }\r\n      this.entryDelayFramesCounter++;\r\n\r\n      this.clearBackground();\r\n      this.drawGrid();\r\n      this.drawPlayfield();\r\n    } else {\r\n      this.clearBackground();\r\n\r\n      if (this.frameCounter === this.framesPerGridCell) {\r\n        if (this.canPieceMoveOneRow()) {\r\n          this.props.dropOneRow();\r\n        } else {\r\n          //Current piece reached top of playfield\r\n          if (currentPiece.x + currentPiece.top <= 0) {\r\n            this.props.gameOver();\r\n          } else {\r\n            //Piece cannot move down, lock piece to playfield\r\n            //Start entry delay\r\n            this.entryDelay = true;\r\n            this.entryDelayFrames = calculateEntryDelay(currentPiece);\r\n            this.props.lockPiece(currentPiece);\r\n            this.linesClearedArray = this.linesCleared();\r\n\r\n            if (this.linesClearedArray.length > 0) {\r\n              this.clearedLines = true;\r\n\r\n              for (let i = 0; i < this.props.playfield.length; i++) {\r\n                this.newPlayfield[i] = this.props.playfield[i].slice();\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.frameCounter = 0;\r\n      }\r\n\r\n      this.frameCounter++;\r\n\r\n      this.drawGrid();\r\n      this.drawPlayfield();\r\n      this.drawCurrentShape();\r\n    }\r\n\r\n    this.myReq = requestAnimationFrame(timestamp => this.mainLoop(timestamp));\r\n  };\r\n\r\n  canPieceMoveOneRow = () => {\r\n    const { playfield, currentPiece } = this.props;\r\n    if (canMove(playfield, currentPiece, 1, 0)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  linesCleared = () => {\r\n    const { playfield, currentPiece } = this.props;\r\n    const start = currentPiece.x + currentPiece.top;\r\n    const end = currentPiece.x + currentPiece.bottom;\r\n    const linesCleared = [];\r\n\r\n    for (let i = start; i <= end; i++) {\r\n      if (\r\n        playfield[i].every(value => {\r\n          return value !== 0;\r\n        })\r\n      ) {\r\n        linesCleared.push(i);\r\n      }\r\n    }\r\n\r\n    return linesCleared;\r\n  };\r\n\r\n  clearBackground = () => {\r\n    const context = this.state.context;\r\n    context.fillStyle = \"#000\";\r\n    context.fillRect(\r\n      0,\r\n      0,\r\n      this.canvas.current.width,\r\n      this.canvas.current.height\r\n    );\r\n  };\r\n\r\n  drawGrid = () => {\r\n    const ctx = this.state.context;\r\n    const canvas = this.canvas.current;\r\n\r\n    const width = canvas.width;\r\n    const height = canvas.height;\r\n\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(width, 0);\r\n    ctx.moveTo(0, height);\r\n    ctx.lineTo(width, height);\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(0, height);\r\n    ctx.moveTo(width, 0);\r\n    ctx.lineTo(width, height);\r\n    ctx.stroke();\r\n  };\r\n\r\n  drawPlayfield = () => {\r\n    const ctx = this.state.context;\r\n    const { playfield } = this.props;\r\n    const rows = playfield.length;\r\n\r\n    for (let i = 0; i < rows; i++) {\r\n      const columns = playfield[i].length;\r\n      for (let j = 0; j < columns; j++) {\r\n        const x = j * config.playfield.blockSize;\r\n        const y = i * config.playfield.blockSize;\r\n        if (playfield[i][j] !== 0) {\r\n          ctx.fillStyle = PIECE[playfield[i][j]].color;\r\n          ctx.fillRect(\r\n            x,\r\n            y,\r\n            config.playfield.blockSize,\r\n            config.playfield.blockSize\r\n          );\r\n          ctx.strokeStyle = \"#000\";\r\n          ctx.strokeRect(\r\n            x,\r\n            y,\r\n            config.playfield.blockSize,\r\n            config.playfield.blockSize\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  drawPlayfieldWithAnimation = (linesClearedArray, clearIndex) => {\r\n    const ctx = this.state.context;\r\n\r\n    const rows = this.newPlayfield.length;\r\n\r\n    for (let i = 0; i < rows; i++) {\r\n      if (linesClearedArray.indexOf(i) !== -1) {\r\n        const newRow = [\r\n          ...this.newPlayfield[i].slice(0, 4 - clearIndex),\r\n          ...Array((clearIndex + 1) * 2).fill(0),\r\n          ...this.newPlayfield[i].slice(5 + clearIndex, 9)\r\n        ];\r\n\r\n        this.newPlayfield[i] = newRow;\r\n      }\r\n      const columns = this.newPlayfield[i].length;\r\n      for (let j = 0; j < columns; j++) {\r\n        const x = j * config.playfield.blockSize;\r\n        const y = i * config.playfield.blockSize;\r\n        if (this.newPlayfield[i][j] !== 0) {\r\n          ctx.fillStyle = PIECE[this.newPlayfield[i][j]].color;\r\n          ctx.fillRect(\r\n            x,\r\n            y,\r\n            config.playfield.blockSize,\r\n            config.playfield.blockSize\r\n          );\r\n          ctx.strokeStyle = \"#000\";\r\n          ctx.strokeRect(\r\n            x,\r\n            y,\r\n            config.playfield.blockSize,\r\n            config.playfield.blockSize\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  drawCurrentShape = () => {\r\n    const ctx = this.state.context;\r\n    const { shape, x: curX, y: curY } = this.props.currentPiece;\r\n    const rows = shape.length;\r\n\r\n    for (let i = 0; i < rows; i++) {\r\n      const columns = shape[i].length;\r\n      for (let j = 0; j < columns; j++) {\r\n        const x = (j + curY) * config.playfield.blockSize;\r\n        const y = (i + curX) * config.playfield.blockSize;\r\n        if (shape[i][j] !== 0) {\r\n          ctx.fillStyle = PIECE[this.props.currentPiece.type].color;\r\n          ctx.fillRect(\r\n            x,\r\n            y,\r\n            config.playfield.blockSize,\r\n            config.playfield.blockSize\r\n          );\r\n          ctx.strokeStyle = \"#000\";\r\n          ctx.strokeRect(\r\n            x,\r\n            y,\r\n            config.playfield.blockSize,\r\n            config.playfield.blockSize\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"playfield\">\r\n        <canvas ref={this.canvas} width=\"300\" height=\"600\" />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  playfield: state.playfield,\r\n  level: state.level,\r\n  currentPiece: state.currentPiece,\r\n  nextPiece: state.nextPiece,\r\n  lock: state.lock\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {\r\n    dropOneRow,\r\n    setCurrentPiece,\r\n    lockPiece,\r\n    updatePieceStatistics,\r\n    gameOver,\r\n    clearLines\r\n  }\r\n)(Playfield);\r\n","import React, { Component } from \"react\";\nimport { connect, Provider } from \"react-redux\";\nimport { setCurrentPiece } from \"../actions/currentPieceActions\";\nimport { gameOver, gameStart } from \"../actions/gameStateActions\";\nimport { updateLines } from \"../actions/lineActions\";\nimport { setEntryDelay } from \"../actions/lockActions\";\nimport { generateNextPiece } from \"../actions/nextPieceActions\";\nimport { clearLines, lockPiece } from \"../actions/playfieldActions\";\nimport { double, single, tetris, triple } from \"../actions/scoreActions\";\nimport { updatePieceStatistics } from \"../actions/statisticsActions\";\nimport AType from \"../components/AType\";\nimport Level from \"../components/level/Level\";\nimport Lines from \"../components/lines/Lines\";\nimport Next from \"../components/next/Next\";\nimport Scoreboard from \"../components/scoreboard/Scoreboard\";\nimport Statistics from \"../components/statistics/Statistics\";\nimport store from \"../store\";\nimport \"./App.scss\";\nimport Controller from \"./Controller\";\nimport Playfield from \"./Playfield\";\nimport { GAME_STATE } from \"../constants\";\n\nclass App extends Component {\n  componentDidMount() {\n    this.props.generateNextPiece(this.props.currentPiece);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.gameState === GAME_STATE.LevelSelection &&\n      this.props.gameState === GAME_STATE.Playing\n    ) {\n      const { nextPiece, currentPiece } = this.props;\n      this.props.setCurrentPiece(nextPiece.type);\n      this.props.updatePieceStatistics(nextPiece.type);\n      this.props.generateNextPiece(currentPiece);\n    }\n  }\n\n  handleNextLoop = () => {\n    const { nextPiece, currentPiece } = this.props;\n    this.props.updatePieceStatistics(nextPiece.type);\n    this.props.setCurrentPiece(nextPiece.type);\n    this.props.generateNextPiece(currentPiece);\n  };\n\n  handleGameStart = () => {\n    this.props.gameStart();\n  };\n\n  handleUpdateScore = linesCleared => {\n    const { level } = this.props;\n    switch (linesCleared) {\n      case 1:\n        this.props.single(level);\n        break;\n      case 2:\n        this.props.double(level);\n        break;\n      case 3:\n        this.props.triple(level);\n        break;\n      case 4:\n        this.props.tetris(level);\n        break;\n      default:\n        break;\n    }\n  };\n\n  render() {\n    const {\n      level,\n      gameState,\n      currentPiece,\n      nextPiece,\n      score,\n      lines,\n      statistics,\n      lock\n    } = this.props;\n\n    return (\n      <Provider store={store}>\n        <div className=\"App\">\n          <Provider store={store}>\n            <div className=\"game\">\n              {level === null && (\n                <AType onGameStart={() => this.handleGameStart()} />\n              )}\n              {level !== null &&\n                currentPiece.type !== null && (\n                  <React.Fragment>\n                    <div className=\"game-wrapper\">\n                      <section className=\"column-statistics\">\n                        <Statistics statistics={statistics} />\n                      </section>\n                      <section className=\"column-lines-playfield\">\n                        <Lines lines={lines} />\n                        <Playfield\n                          gameState={gameState}\n                          onMoveBlock={() => this.moveBlock()}\n                          entryDelayFrames={lock.entryDelayFrames}\n                          onNextLoop={() => this.handleNextLoop()}\n                          onUpdateScore={linesCleared =>\n                            this.handleUpdateScore(linesCleared)\n                          }\n                        />\n                      </section>\n                      <section className=\"column-scoreboard-next-level\">\n                        <Scoreboard score={score} />\n                        <Next nextPiece={nextPiece} />\n                        <Level level={level} />\n                      </section>\n                    </div>\n\n                    <section className=\"controls\">\n                      <Controller\n                        onStartButton={() => this.handleStartButton()}\n                      />\n                    </section>\n                  </React.Fragment>\n                )}\n            </div>\n          </Provider>\n        </div>\n      </Provider>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  gameState: state.gameState,\n  level: state.level,\n  currentPiece: state.currentPiece,\n  nextPiece: state.nextPiece,\n  lines: state.lines,\n  score: state.score,\n  statistics: state.statistics,\n  playfield: state.playfield,\n  lock: state.lock\n});\n\nexport default connect(\n  mapStateToProps,\n  {\n    gameStart,\n    gameOver,\n    generateNextPiece,\n    setCurrentPiece,\n    updatePieceStatistics,\n    lockPiece,\n    setEntryDelay,\n    updateLines,\n    clearLines,\n    single,\n    double,\n    triple,\n    tetris\n  }\n)(App);\n","import { SET_ENTRY_DELAY } from \"./types\";\r\n\r\nexport const setEntryDelay = entryDelayFrames => dispatch => {\r\n  dispatch({\r\n    type: SET_ENTRY_DELAY,\r\n    payload: entryDelayFrames\r\n  });\r\n};\r\n","import { UPDATE_LINES } from \"./types\";\r\n\r\nexport const updateLines = level => dispatch => {\r\n  dispatch({\r\n    type: UPDATE_LINES,\r\n    payload: level\r\n  });\r\n};\r\n","import { SINGLE, DOUBLE, TRIPLE, TETRIS } from \"./types\";\r\n\r\nexport const single = level => dispatch => {\r\n  dispatch({\r\n    type: SINGLE,\r\n    payload: level\r\n  });\r\n};\r\nexport const double = level => dispatch => {\r\n  dispatch({\r\n    type: DOUBLE,\r\n    payload: level\r\n  });\r\n};\r\nexport const triple = level => dispatch => {\r\n  dispatch({\r\n    type: TRIPLE,\r\n    payload: level\r\n  });\r\n};\r\nexport const tetris = level => dispatch => {\r\n  dispatch({\r\n    type: TETRIS,\r\n    payload: level\r\n  });\r\n};\r\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"normalize.css\";\nimport \"./index.scss\";\nimport App from \"./containers/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}