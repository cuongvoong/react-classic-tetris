(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(41)},28:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(16),c=a.n(r),o=(a(26),a(28),a(4)),i=a(5),s=a(7),u=a(6),p=a(8),m=a(2),d=function(e){return function(t){t({type:"SET_CURRENT_PIECE",payload:e})}},f=function(){return function(e){e({type:"GAME_OVER"})}},E={LevelSelection:0,Playing:1,Paused:2,GameOver:3},y={LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,B:66},v={T:{0:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],top:1,bottom:2},90:{shape:[[0,"T",0],["T","T",0],[0,"T",0]],top:0,bottom:2},180:{shape:[[0,"T",0],["T","T","T"],[0,0,0]],top:0,bottom:1},270:{shape:[[0,"T",0],[0,"T","T"],[0,"T",0]],top:0,bottom:2},spawn:{x:-1,y:4},color:"white"},J:{0:{shape:[[0,0,0],["J","J","J"],[0,0,"J"]],top:1,bottom:2},90:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],top:0,bottom:2},180:{shape:[["J",0,0],["J","J","J"],[0,0,0]],top:0,bottom:1},270:{shape:[[0,"J","J"],[0,"J",0],[0,"J",0]],top:0,bottom:2},spawn:{x:-1,y:4},color:"blueviolet"},Z:{0:{shape:[[0,0,0],["Z","Z",0],[0,"Z","Z"]],top:1,bottom:2},90:{shape:[[0,0,"Z"],[0,"Z","Z"],[0,"Z",0]],top:0,bottom:2},180:{shape:[[0,0,0],["Z","Z",0],[0,"Z","Z"]],top:1,bottom:2},270:{shape:[[0,0,"Z"],[0,"Z","Z"],[0,"Z",0]],top:0,bottom:2},spawn:{x:-1,y:4},color:"red"},O:{0:{shape:[["O","O"],["O","O"]],top:0,bottom:1},90:{shape:[["O","O"],["O","O"]],top:0,bottom:1},180:{shape:[["O","O"],["O","O"]],top:0,bottom:1},270:{shape:[["O","O"],["O","O"]],top:0,bottom:1},spawn:{x:0,y:4},color:"white"},S:{0:{shape:[[0,0,0],[0,"S","S"],["S","S",0]],top:1,bottom:2},90:{shape:[[0,"S",0],[0,"S","S"],[0,0,"S"]],top:0,bottom:2},180:{shape:[[0,0,0],[0,"S","S"],["S","S",0]],top:1,bottom:2},270:{shape:[[0,"S",0],[0,"S","S"],[0,0,"S"]],top:0,bottom:2},spawn:{x:-1,y:4},color:"blueviolet"},L:{0:{shape:[[0,0,0],["L","L","L"],["L",0,0]],top:1,bottom:2},90:{shape:[["L","L",0],[0,"L",0],[0,"L",0]],top:0,bottom:2},180:{shape:[[0,0,"L"],["L","L","L"],[0,0,0]],top:0,bottom:1},270:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],top:0,bottom:2},spawn:{x:-1,y:4},color:"red"},I:{0:{shape:[[0,0,0,0],[0,0,0,0],["I","I","I","I"],[0,0,0,0]],top:2,bottom:2},90:{shape:[[0,0,"I",0],[0,0,"I",0],[0,0,"I",0],[0,0,"I",0]],top:0,bottom:3},180:{shape:[[0,0,0,0],[0,0,0,0],["I","I","I","I"],[0,0,0,0]],top:2,bottom:2},270:{shape:[[0,0,"I",0],[0,0,"I",0],[0,0,"I",0],[0,0,"I",0]],top:0,bottom:3},spawn:{x:-2,y:3},color:"white"}},h={0:"T",1:"J",2:"Z",3:"O",4:"S",5:"L",6:"I"},b=function(e){var t=Math.floor(8*Math.random());return 7!==t?null===e.type?h[t]:h[t]!==e.type?h[t]:h[Math.floor(7*Math.random())]:h[Math.floor(7*Math.random())]},N=function(e){return function(t){t({type:"CLEAR_LINES",payload:e})}},O=function(e){return function(t){t({type:"LOCK_PIECE",payload:e})}},S=function(e){return function(t){t({type:"UPDATE_PIECE_STATISTICS",payload:e})}},k=(a(33),function(e){var t=e.leaderboard.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,t+1),l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.score),l.a.createElement("td",null,e.level))});return l.a.createElement("section",{className:"leaderboard"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",{className:"th-name"},"NAME"),l.a.createElement("th",{className:"th-score"},"SCORE"),l.a.createElement("th",{className:"th-level"},"LV"))),l.a.createElement("tbody",null,t)))}),C=(a(35),function(e){var t=e.level,a=e.onLevelClick,n=function(e){a(e.shiftKey?t+10:t)};return l.a.createElement("div",{onClick:function(e,t){return n(e)},className:"level-selection-numbers-item"},t)}),T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).handleLevelClick=function(e){a.props.setLevel(e),a.props.onGameStart()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.leaderboard,a=Array(10).fill().map(function(t,a){return l.a.createElement(C,{key:a,level:a,onLevelClick:function(t){return e.handleLevelClick(t)}})});return l.a.createElement("div",{className:"a-type"},l.a.createElement("section",{className:"level-selection"},l.a.createElement("div",{className:"level-selection-header"},l.a.createElement("h2",null,"LEVEL")),l.a.createElement("div",{className:"level-selection-numbers"},a)),l.a.createElement(k,{leaderboard:t}))}}]),t}(n.Component),w=Object(m.b)(function(e){return{leaderboard:e.leaderboard}},{setLevel:function(e){return function(t){t({type:"SET_LEVEL",payload:e})}}})(T),P=function(e){return l.a.createElement("section",{className:"level"},l.a.createElement("div",{className:"section-header"},"LEVEL"),l.a.createElement("div",{className:"section-text"},e.level.toString().padStart(2,0)))},g=function(e){var t=e.lines;return l.a.createElement("section",{className:"lines"},l.a.createElement("span",{className:"section-text"},"LINES-",t.toString().padStart(3,"0")))},L=function(){return l.a.createElement("div",{className:"t"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:""}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:""})))},x=function(){return l.a.createElement("div",{className:"o"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"})))},I=function(){return l.a.createElement("div",{className:"i"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"})))},B=function(){return l.a.createElement("div",{className:"l"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:""}),l.a.createElement("div",{className:""})))},R=function(){return l.a.createElement("div",{className:"z"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:""})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:""}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"})))},A=function(){return l.a.createElement("div",{className:"j"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",{className:"fill"})))},_=function(){return l.a.createElement("div",{className:"s"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:""}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:"fill"}),l.a.createElement("div",{className:""})))},j=function(e){var t;switch(e.nextPiece.type){case"T":t=l.a.createElement(L,null);break;case"J":t=l.a.createElement(A,null);break;case"Z":t=l.a.createElement(R,null);break;case"O":t=l.a.createElement(x,null);break;case"S":t=l.a.createElement(_,null);break;case"L":t=l.a.createElement(B,null);break;case"I":t=l.a.createElement(I,null)}return l.a.createElement("section",{className:"next"},l.a.createElement("div",{className:"section-header"},"NEXT"),l.a.createElement("div",{style:{height:50}},t))},D=function(e){return l.a.createElement("section",{className:"top-score"},l.a.createElement("div",{className:"section-header"},"TOP"),l.a.createElement("span",{className:"section-text"},e.score))},U=function(e){return l.a.createElement("section",{className:"current-score"},l.a.createElement("div",{className:"section-header"},"SCORE"),l.a.createElement("span",{className:"section-text"},e.score))},G=function(e){var t=e.score,a=t.top,n=t.current;return l.a.createElement("section",{className:"scoreboard"},l.a.createElement(D,{score:a}),l.a.createElement(U,{score:n}))},M=function(e){return l.a.createElement("tr",{className:"statistics-row"},l.a.createElement("td",null,l.a.createElement("div",{className:"piece"},e.piece)),l.a.createElement("td",null,l.a.createElement("span",{className:"counter"},e.statistic.toString().padStart(3,"0"))))},J=function(e){var t=e.statistics;return l.a.createElement("section",{className:"statistics"},l.a.createElement("div",{className:"section-header"},"STATISTICS"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement(M,{piece:l.a.createElement(L,null),statistic:t.T}),l.a.createElement(M,{piece:l.a.createElement(A,null),statistic:t.J}),l.a.createElement(M,{piece:l.a.createElement(R,null),statistic:t.Z}),l.a.createElement(M,{piece:l.a.createElement(x,null),statistic:t.O}),l.a.createElement(M,{piece:l.a.createElement(_,null),statistic:t.S}),l.a.createElement(M,{piece:l.a.createElement(B,null),statistic:t.L}),l.a.createElement(M,{piece:l.a.createElement(I,null),statistic:t.I}))))},F=a(9),Z=a(1),z={top:1e4,current:0},W=a(10),V=Array(20).fill(Array(10).fill(0)),K=a(11),q={T:0,J:0,Z:0,O:0,S:0,L:0,I:0},H={type:null,hidden:!1},X={type:null,x:0,y:0,top:0,bottom:0,shape:null,rotation:0},Y=E.LevelSelection,$=[{name:"HOWARD",score:1e4,level:9},{name:"OTASON",score:7500,level:5},{name:"LANCE",score:5e3,level:0}],Q={lock:!1,entryDelayFrames:0},ee=Object(F.c)({score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SINGLE":return Object(Z.a)({},e,{current:40*(t.payload+1)+e.current});case"DOUBLE":return Object(Z.a)({},e,{current:100*(t.payload+1)+e.current});case"TRIPLE":return Object(Z.a)({},e,{current:300*(t.payload+1)+e.current});case"TETRIS":return console.log(t.payload),Object(Z.a)({},e,{current:1200*(t.payload+1)+e.current});default:return e}},playfield:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOCK_PIECE":for(var a=[],n=0;n<e.length;n++){for(var l=[],r=0;r<e[n].length;r++)n>=t.payload.x&&n<=t.payload.x+t.payload.shape.length-1&&r>=t.payload.y&&r<=t.payload.shape[n-t.payload.x].length-1+t.payload.y?l.push(t.payload.shape[n-t.payload.x][r-t.payload.y]||e[n][r]):l.push(e[n][r]);a.push(l)}return a;case"CLEAR_LINES":return Object(W.a)(Array(t.payload.length).fill(Array(10).fill(0))).concat(Object(W.a)(e.filter(function(e,a){return-1===t.payload.indexOf(a)})));default:return e}},level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LEVEL":return t.payload;case"INCREMENT_LEVEL":return e+1;default:return e}},lines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_LINES":return e+t.payload;default:return e}},music:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(arguments.length>1?arguments[1]:void 0).type,e},statistics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PIECE_STATISTICS":return Object(Z.a)({},e,Object(K.a)({},t.payload,e[t.payload]+1));default:return e}},currentPiece:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_PIECE":return Object(Z.a)({},e,{type:t.payload,x:v[t.payload].spawn.x,y:v[t.payload].spawn.y,shape:v[t.payload][0].shape,top:v[t.payload][0].top,bottom:v[t.payload][0].bottom,rotation:0});case"MOVE_LEFT":return Object(Z.a)({},e,{y:e.y-1});case"MOVE_RIGHT":return Object(Z.a)({},e,{y:e.y+1});case"MOVE_DOWN":case"DROP_ONE_ROW":return Object(Z.a)({},e,{x:e.x+1});case"ROTATE_CLOCKWISE":var a=e.rotation+90>=360?0:e.rotation+90;return Object(Z.a)({},e,{rotation:a,shape:v[t.payload.type][a].shape,top:v[t.payload.type][a].top,bottom:v[t.payload.type][a].bottom});case"ROTATE_COUNTERCLOCKWISE":var n=0===e.rotation?270:e.rotation-90;return Object(Z.a)({},e,{rotation:n,shape:v[t.payload.type][n].shape,top:v[t.payload.type][n].top,bottom:v[t.payload.type][n].bottom});default:return e}},nextPiece:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GENERATE_NEXT_PIECE":return Object(Z.a)({},e,{type:t.payload});case"SELECT_BUTTON":return Object(Z.a)({},e,{hidden:!e.hidden});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;switch((arguments.length>1?arguments[1]:void 0).type){case"START_BUTTON":return e===E.Playing?E.Paused:e===E.Paused?E.Playing:e;case"GAME_START":return E.Playing;case"GAME_OVER":return E.GameOver;default:return e}},leaderboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;switch((arguments.length>1?arguments[1]:void 0).type){case"UPDATE_LEADERBOARD":default:return e}},lock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ENTRY_DELAY":return Object(Z.a)({},e,{lock:!0,entryDelayFrames:t.payload});default:return e}}}),te=[a(20).a],ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,ne=Object(F.e)(ee,ae(F.a.apply(void 0,te))),le=(a(37),a(39),function(e){return l.a.createElement("div",{onClick:function(){e.onButtonClick()},className:e.class},e.children)}),re=function(e){var t=e.onUpButtonClick,a=e.onDownButtonClick,n=e.onLeftButtonClick,r=e.onRightButtonClick;return l.a.createElement("section",{className:"d-pad"},l.a.createElement("div",{className:"top-row"},l.a.createElement("div",null),l.a.createElement(le,{onButtonClick:t,class:"up-button"}),l.a.createElement("div",null)),l.a.createElement("div",{className:"middle-row"},l.a.createElement(le,{onButtonClick:n,class:"left-button"}),l.a.createElement("div",null),l.a.createElement(le,{onButtonClick:r,class:"right-button"})),l.a.createElement("div",{className:"bottom-row"},l.a.createElement("div",null),l.a.createElement(le,{onButtonClick:a,class:"down-button"}),l.a.createElement("div",null)))},ce=function(e,t,a){for(var n=[],l=e.x,r=e.y,c=e.shape,o=0;o<c.length;o++)for(var i=0;i<c[o].length;i++)0!==c[o][i]&&n.push([l+t+o,r+a+i]);return n},oe=function(e,t,a,n){var l=ce(t,a,n);return!se(e,l)},ie=function(e,t,a){var n=t.type,l=t.rotation,r=t.x,c=t.y,o=l+a;-90===o&&(o=270),360===o&&(o=0);var i={shape:v[n][o].shape,x:r,y:c},s=ce(i,0,0);return!se(e,s)},se=function(e,t){for(var a=0;a<t.length;a++){if(t[a][0]>19)return!0;if(t[a][1]<0||t[a][1]>9)return!0;if(t[a][0]>=0&&0!==e[t[a][0]][t[a][1]])return!0}return!1},ue=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).handleUpButtonClick=function(){a.props.up()},a.handleDownButtonClick=function(){a.props.down(a.props.playfield,a.props.currentPiece)},a.handleLeftButtonClick=function(){a.props.left(a.props.playfield,a.props.currentPiece)},a.handleRightButtonClick=function(){a.props.right(a.props.playfield,a.props.currentPiece)},a.handleSelectButtonClick=function(){a.props.select()},a.handleStartButtonClick=function(){a.props.start(),a.props.onStartButton()},a.handleBButtonClick=function(){a.props.b(a.props.playfield,a.props.currentPiece)},a.handleAButtonClick=function(){a.props.a(a.props.playfield,a.props.currentPiece)},a.handleKeyDown=function(e){switch(e.keyCode){case y.UP:a.handleUpButtonClick();break;case y.DOWN:a.handleDownButtonClick();break;case y.LEFT:a.handleLeftButtonClick();break;case y.RIGHT:a.handleRightButtonClick();break;case y.A:a.handleAButtonClick();break;case y.B:a.handleBButtonClick();break;default:return}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this;return l.a.createElement("section",{className:"controller"},l.a.createElement(re,{onUpButtonClick:function(){return e.handleUpButtonClick()},onDownButtonClick:function(){return e.handleDownButtonClick()},onLeftButtonClick:function(){return e.handleLeftButtonClick()},onRightButtonClick:function(){return e.handleRightButtonClick()}}),l.a.createElement("div",{className:"select-start"},l.a.createElement(le,{onButtonClick:function(){return e.handleSelectButtonClick()},class:"select-button"}),l.a.createElement(le,{onButtonClick:function(){return e.handleStartButtonClick()},class:"start-button"})),l.a.createElement("div",{className:"b-a"},l.a.createElement(le,{onButtonClick:function(){return e.handleBButtonClick()},class:"b-button"}),l.a.createElement(le,{onButtonClick:function(){return e.handleAButtonClick()},class:"a-button"})))}}]),t}(n.Component),pe=Object(m.b)(function(e){return{playfield:e.playfield,currentPiece:e.currentPiece}},{up:function(){return function(e){}},down:function(e,t){return function(a){oe(e,t,1,0)?a({type:"MOVE_DOWN"}):a({type:"LOCK_PIECE",payload:t})}},left:function(e,t){return function(a){oe(e,t,0,-1)&&a({type:"MOVE_LEFT"})}},right:function(e,t){return function(a){oe(e,t,0,1)&&a({type:"MOVE_RIGHT"})}},b:function(e,t){return function(a){ie(e,t,-90)&&a({type:"ROTATE_COUNTERCLOCKWISE",payload:t})}},a:function(e,t){return function(a){ie(e,t,90)&&a({type:"ROTATE_CLOCKWISE",payload:t})}},select:function(){return function(e){e({type:"SELECT_BUTTON"})}},start:function(){return function(e){e({type:"START_BUTTON"})}}})(ue),me={playfield:{rows:20,columns:10,blockSize:30}},de=function(e){return 0===e?48:1===e?43:2===e?38:3===e?33:4===e?28:5===e?23:6===e?18:7===e?13:8===e?8:9===e?6:e>=10&&e<=12?5:e>=13&&e<=15?4:e>=16&&e<=18?3:e>=19&&e<=28?2:1},fe=function(e){return e.x+e.bottom>=18&&e.x+e.bottom<=19?10:e.x+e.bottom>=14&&e.x+e.bottom<=17?12:e.x+e.bottom>=10&&e.x+e.bottom<=13?14:e.x+e.bottom>=6&&e.x+e.bottom<=9?16:e.x+e.bottom>=2&&e.x+e.bottom<=5?18:20},Ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={context:null},a.mainLoop=function(e){var t=a.props.currentPiece;if(a.props.gameState!==E.GameOver){if(a.clearedLines)a.clearBackground(),a.drawGrid(),a.drawPlayfieldWithAnimation(a.linesClearedArray,a.clearIndex),4===a.animationFrameCounter&&(a.clearIndex++,5===a.clearIndex&&(a.clearIndex=0,a.clearedLines=!1,a.props.clearLines(a.linesClearedArray),a.props.onUpdateScore(a.linesClearedArray.length)),a.animationFrameCounter=0),a.animationFrameCounter++;else if(a.entryDelay)a.entryDelayFramesCounter===a.entryDelayFrames&&(a.props.onNextLoop(),a.entryDelayFramesCounter=0,a.entryDelay=!1),a.entryDelayFramesCounter++,a.clearBackground(),a.drawGrid(),a.drawPlayfield();else{if(a.clearBackground(),a.frameCounter===a.framesPerGridCell){if(a.canPieceMoveOneRow())a.props.dropOneRow();else if(t.x+t.top<=0)a.props.gameOver();else if(a.entryDelay=!0,a.entryDelayFrames=fe(t),a.props.lockPiece(t),a.linesClearedArray=a.linesCleared(),a.linesClearedArray.length>0){a.clearedLines=!0;for(var n=0;n<a.props.playfield.length;n++)a.newPlayfield[n]=a.props.playfield[n].slice()}a.frameCounter=0}a.frameCounter++,a.drawGrid(),a.drawPlayfield(),a.drawCurrentShape()}a.myReq=requestAnimationFrame(function(e){return a.mainLoop(e)})}else cancelAnimationFrame(a.myReq)},a.canPieceMoveOneRow=function(){var e=a.props,t=e.playfield,n=e.currentPiece;return!!oe(t,n,1,0)},a.linesCleared=function(){for(var e=a.props,t=e.playfield,n=e.currentPiece,l=n.x+n.top,r=n.x+n.bottom,c=[],o=l;o<=r;o++)t[o].every(function(e){return 0!==e})&&c.push(o);return c},a.clearBackground=function(){var e=a.state.context;e.fillStyle="#000",e.fillRect(0,0,a.canvas.current.width,a.canvas.current.height)},a.drawGrid=function(){var e=a.state.context,t=a.canvas.current,n=t.width,l=t.height;e.moveTo(0,0),e.lineTo(n,0),e.moveTo(0,l),e.lineTo(n,l),e.moveTo(0,0),e.lineTo(0,l),e.moveTo(n,0),e.lineTo(n,l),e.stroke()},a.drawPlayfield=function(){for(var e=a.state.context,t=a.props.playfield,n=t.length,l=0;l<n;l++)for(var r=t[l].length,c=0;c<r;c++){var o=c*me.playfield.blockSize,i=l*me.playfield.blockSize;0!==t[l][c]&&(e.fillStyle=v[t[l][c]].color,e.fillRect(o,i,me.playfield.blockSize,me.playfield.blockSize),e.strokeStyle="#000",e.strokeRect(o,i,me.playfield.blockSize,me.playfield.blockSize))}},a.drawPlayfieldWithAnimation=function(e,t){for(var n=a.state.context,l=a.newPlayfield.length,r=0;r<l;r++){if(-1!==e.indexOf(r)){var c=Object(W.a)(a.newPlayfield[r].slice(0,4-t)).concat(Object(W.a)(Array(2*(t+1)).fill(0)),Object(W.a)(a.newPlayfield[r].slice(5+t,9)));a.newPlayfield[r]=c}for(var o=a.newPlayfield[r].length,i=0;i<o;i++){var s=i*me.playfield.blockSize,u=r*me.playfield.blockSize;0!==a.newPlayfield[r][i]&&(n.fillStyle=v[a.newPlayfield[r][i]].color,n.fillRect(s,u,me.playfield.blockSize,me.playfield.blockSize),n.strokeStyle="#000",n.strokeRect(s,u,me.playfield.blockSize,me.playfield.blockSize))}}},a.drawCurrentShape=function(){for(var e=a.state.context,t=a.props.currentPiece,n=t.shape,l=t.x,r=t.y,c=n.length,o=0;o<c;o++)for(var i=n[o].length,s=0;s<i;s++){var u=(s+r)*me.playfield.blockSize,p=(o+l)*me.playfield.blockSize;0!==n[o][s]&&(e.fillStyle=v[a.props.currentPiece.type].color,e.fillRect(u,p,me.playfield.blockSize,me.playfield.blockSize),e.strokeStyle="#000",e.strokeRect(u,p,me.playfield.blockSize,me.playfield.blockSize))}},a.canvas=l.a.createRef(),a.frameCounter=0,a.framesPerGridCell=de(a.props.level),a.entryDelay=!1,a.entryDelayFramesCounter=0,a.linesClearedArray=null,a.clearedLines=!1,a.clearIndex=0,a.animationFrameCounter=0,a.newPlayfield=[],a.myReq=null,a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({context:this.canvas.current.getContext("2d")}),this.myReq=requestAnimationFrame(function(t){return e.mainLoop(t)})}},{key:"render",value:function(){return l.a.createElement("section",{className:"playfield"},l.a.createElement("canvas",{ref:this.canvas,width:"300",height:"600"}))}}]),t}(n.PureComponent),ye=Object(m.b)(function(e){return{playfield:e.playfield,level:e.level,currentPiece:e.currentPiece,nextPiece:e.nextPiece,lock:e.lock}},{dropOneRow:function(e){return function(t){t({type:"DROP_ONE_ROW",payload:e})}},setCurrentPiece:d,lockPiece:O,updatePieceStatistics:S,gameOver:f,clearLines:N})(Ee),ve=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).handleNextLoop=function(){var e=a.props,t=e.nextPiece,n=e.currentPiece;a.props.updatePieceStatistics(t.type),a.props.setCurrentPiece(t.type),a.props.generateNextPiece(n)},a.handleGameStart=function(){a.props.gameStart()},a.handleUpdateScore=function(e){var t=a.props.level;switch(e){case 1:a.props.single(t);break;case 2:a.props.double(t);break;case 3:a.props.triple(t);break;case 4:a.props.tetris(t)}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.generateNextPiece(this.props.currentPiece)}},{key:"componentDidUpdate",value:function(e){if(e.gameState===E.LevelSelection&&this.props.gameState===E.Playing){var t=this.props,a=t.nextPiece,n=t.currentPiece;this.props.setCurrentPiece(a.type),this.props.updatePieceStatistics(a.type),this.props.generateNextPiece(n)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.level,n=t.gameState,r=t.currentPiece,c=t.nextPiece,o=t.score,i=t.lines,s=t.statistics,u=t.lock;return l.a.createElement(m.a,{store:ne},l.a.createElement("div",{className:"App"},l.a.createElement(m.a,{store:ne},l.a.createElement("div",{className:"game"},null===a&&l.a.createElement(w,{onGameStart:function(){return e.handleGameStart()}}),null!==a&&null!==r.type&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"game-wrapper"},l.a.createElement("section",{className:"column-statistics"},l.a.createElement(J,{statistics:s})),l.a.createElement("section",{className:"column-lines-playfield"},l.a.createElement(g,{lines:i}),l.a.createElement(ye,{gameState:n,onMoveBlock:function(){return e.moveBlock()},entryDelayFrames:u.entryDelayFrames,onNextLoop:function(){return e.handleNextLoop()},onUpdateScore:function(t){return e.handleUpdateScore(t)}})),l.a.createElement("section",{className:"column-scoreboard-next-level"},l.a.createElement(G,{score:o}),l.a.createElement(j,{nextPiece:c}),l.a.createElement(P,{level:a}))),l.a.createElement("section",{className:"controls"},l.a.createElement(pe,{onStartButton:function(){return e.handleStartButton()}})))))))}}]),t}(n.Component),he=Object(m.b)(function(e){return{gameState:e.gameState,level:e.level,currentPiece:e.currentPiece,nextPiece:e.nextPiece,lines:e.lines,score:e.score,statistics:e.statistics,playfield:e.playfield,lock:e.lock}},{gameStart:function(){return function(e){e({type:"GAME_START"})}},gameOver:f,generateNextPiece:function(e){return function(t){t({type:"GENERATE_NEXT_PIECE",payload:b(e)})}},setCurrentPiece:d,updatePieceStatistics:S,lockPiece:O,setEntryDelay:function(e){return function(t){t({type:"SET_ENTRY_DELAY",payload:e})}},updateLines:function(e){return function(t){t({type:"UPDATE_LINES",payload:e})}},clearLines:N,single:function(e){return function(t){t({type:"SINGLE",payload:e})}},double:function(e){return function(t){t({type:"DOUBLE",payload:e})}},triple:function(e){return function(t){t({type:"TRIPLE",payload:e})}},tetris:function(e){return function(t){t({type:"TETRIS",payload:e})}}})(ve);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(m.a,{store:ne},l.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.9d6a09de.chunk.js.map